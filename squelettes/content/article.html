<BOUCLE(ARTICLES){id_article}>
  #SET{mots, #ARRAY}
  <BOUCLE_mots(MOTS){id_article}>
    [(#SET{mots, #GET{mots}|push{#ID_MOT}})]
  </BOUCLE_mots>
  [(#REM)
    <!--
      Préparer le sommaire pour le champ Texte et ajouter, si nécessaire,
      les intertitres des documents et images associés à l'article.
    -->
  ]#SET{docs, ''} #SET{imgs, ''}
  <BOUCLE_docs(DOCUMENTS){id_article}{vu=non}{media=file}> </BOUCLE_docs>
    [(#SET{docs, #TOTAL_BOUCLE|singulier_ou_pluriel{fraap_squelettes:document_associe, fraap_squelettes:documents_associes}|wrap{<h2>}})]
  </B_docs>
  <BOUCLE_imgs(DOCUMENTS){id_article}{vu=non}{media=image}> </BOUCLE_imgs>
    [(#SET{imgs, #VAL{<:fraap_squelettes:image_associee:>}|wrap{<h2>}})]
  </B_imgs>
  [(#SET{sommaire, [(#SOMMAIRE{[(#TEXTE) #GET{docs} #GET{imgs}]}|ajouter_styles_toc|supprimer_soulignement)]})]
  <div class="page" data-page="article">
    <div class="wrapper-structure">
      <INCLURE{fond=inclure/breadcrumb/article, id_article}/>
    </div>
    <div class="wrapper-content" data-flush>
      <div class="region">
        <article class="article">
          <div class="prose[(#GET{sommaire}|oui) with-large-width]">
            <header class="headline">
              <h1 class="headline_title variant-article measure">#TITRE</h1>
              [<p class="headline_subtitle measure">(#SOUSTITRE)</p>]
              [<div class="headline_desc variant-article prose-editor flow measure">(#CHAPO)</div>]
              [(#REM) <!-- Date de publication et éventuellement date de modification si supérieure à 24h après la date de publication  --> ]
              <p class="headline_date">
                <:fraap_squelettes:date_publication_article:><time datetime="[(#DATE|date_iso)]">[(#DATE|affdate)]</time>[(#DATE_MODIF|affdate{U}|moins{#DATE|affdate{U}}|>{86400}|?{[<:fraap_squelettes:date_mise_a_jour_fiche:><time datetime="[(#DATE_MODIF|date_iso)]">(#DATE_MODIF|affdate)</time>.], '.'})]
              </p>
            </header>
          </div>
          <div class="with-sidebar flex-dir-rev flex-align-start flex-wrap-no">
            [<nav class="toc gap-top-5 flow-small" data-type="side">
              <h2 class="toc_heading"><:fraap_squelettes:toc_titre:></h2>
              (#GET{sommaire})
            </nav>]
            <div class="prose">
              [<div class="gap-top-5">
                (#LOGO_ARTICLE|image_reduire{1110, 0})
              </div>]
              [<div class="toc gap-top-5" data-type="inner">
                <details role="navigation">
                  <summary><:fraap_squelettes:toc_titre:></summary>
                  (#GET{sommaire})
                </details>
              </div>]
              [<div class="flow prose-editor gap-top-5">
                (#TEXTE|ancres_sommaire)
              </div>]

              <BOUCLE_docs_article(DOCUMENTS){id_article}{vu=non}{media=file}{0,1}>
                <INCLURE{fond=inclure/liste/article-document-file, id_article}/>
              </BOUCLE_docs_article>

              <BOUCLE_imgs_article(DOCUMENTS){id_article}{vu=non}{media=image}{0,1}>
                <INCLURE{fond=inclure/liste/article-document-image, id_article}/>
              </BOUCLE_imgs_article>

              [<div class="notes prose-editor auto-grid gap-top-6">
                (#NOTES)
              </div>]
            </div>
          </div>
        </article>
      </div>
    </div>

    <BOUCLE_prolonger_liaisons(ARTICLES_LIES){id_article}{type_liaison=prolonger}{0,1}>
      <INCLURE{fond=inclure/prolonger/article-articles_lies, id_article} />
    </BOUCLE_prolonger_liaisons>
      <INCLURE{fond=inclure/prolonger/article-mots_articles, mots=#GET{mots}, id_article} />
    <//B_prolonger_liaisons>

  </div>
</BOUCLE>
