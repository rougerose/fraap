<?php
      $somecontent = '
/*---  thèmes (page mots-cles) ---*/
#rub0 img.spip_puce, #rub0 h3#titreDocuments {
  background-color:#715050;
}
#rub0 h3#titreDocuments {
    background-color:#9e9090;
}
#rub0 div.texte a, #rub0 div.notes a, #rub0 #cp_interieure h1, /*#rub0 #cp_interieure h2,*/ #rub0 .notes h3, #rub0 h3.spip, #rub0 div#documents a, #rub0 div#motsCles a {
  color:#715050;
}
#rub0 #ConteneurExterieur {
  background-image:url(/IMG/a/9e9090.gif);
}
#rub0 div.texte a, #rub0 div.notes a, #rub0 div.MeaArticles, #rub0 div.MeaBreves {
  border-bottom-color:#715050;
}
#rub0.themes #CEtitreRubrique  {
  background-image:url(/IMG/a/themes.png);
}
#rub0.recherche #CEtitreRubrique  {
    background-image:url(/IMG/a/recherche.png);
}
#rub0.fraap #CEtitreRubrique  {
    background-image:url(/IMG/a/a_propos.gif);
}
#rub0.fraap div.spip_encadrer {
  border:1px solid #715050;
  padding:5px;
}
<BOUCLE_racine(RUBRIQUES){racine}{doublons}>/*---  rubrique  #TITRE ---*/<BOUCLE_couleur2(DOCUMENTS){id_rubrique}{0,1}{descriptif==^#}>
div.CERubrique#ID_RUBRIQUE {
  background-image:url([/(#URL_DOCUMENT)]);
}
<BOUCLE_titre_image_rubrique(DOCUMENTS){id_rubrique}{0,1}{titre=titre rubrique}>
div.CEtRubrique#ID_RUBRIQUE  {
  background-image:url([/(#URL_DOCUMENT)]);
}
</BOUCLE_titre_image_rubrique>
h2#rub1#ID_RUBRIQUE, li#rub1#ID_RUBRIQUE, #localisationRub1#ID_RUBRIQUE, #rub#ID_RUBRIQUE table.spip th, #rub#ID_RUBRIQUE h3#titreFP, #rub#ID_RUBRIQUE h3#titreDocuments, #rub#ID_RUBRIQUE #titreMotCles, #rub#ID_RUBRIQUE #titrePortfolio,  #rub#ID_RUBRIQUE #pf, #rub#ID_RUBRIQUE #contenu-rubrique-breves h2, #rub0.themes img.puce_transparente_rub#ID_RUBRIQUE, #rub#ID_RUBRIQUE img.spip_puce, #rub#ID_RUBRIQUE div.annuaire, #rub#ID_RUBRIQUE dl.alr-asso-activites {
  background-color:#DESCRIPTIF;
}
#rub#ID_RUBRIQUE #contenu-rubrique-articles a, #rub#ID_RUBRIQUE #contenu-rubrique-articles-breves a, #rub#ID_RUBRIQUE #contenu-rubrique-breves a, #rub#ID_RUBRIQUE #chapo a, #rub#ID_RUBRIQUE #contenu_article a, #rub#ID_RUBRIQUE #annuaire-info-resultats a, #rub#ID_RUBRIQUE .alr-asso-descriptif a, span.rubrique_courante#ID_RUBRIQUE a, #rub0.sommaire div#sommaire#ID_RUBRIQUE div.MeaArticles a, #rub0.sommaire div#sommaire#ID_RUBRIQUE p a, #rub#ID_RUBRIQUE #ConteneurToggle a, #rub#ID_RUBRIQUE #cloneUL a, #rub#ID_RUBRIQUE #FormulairePetitionsSignatures a, #rub#ID_RUBRIQUE div#documents a, #rub#ID_RUBRIQUE div#motsCles a, #rub#ID_RUBRIQUE div#portfolio a {
  color:#DESCRIPTIF;
  border-bottom-color:#DESCRIPTIF;
}
#rub#ID_RUBRIQUE #cp_interieure h2, #rub#ID_RUBRIQUE .notes h3, #rub#ID_RUBRIQUE h3.spip {
  color:#DESCRIPTIF;
}
#rub#ID_RUBRIQUE div.MeaArticles, #rub0.sommaire div#sommaire#ID_RUBRIQUE div.MeaArticles, #rub#ID_RUBRIQUE div.MeaBreves {
  border-bottom-color:#DESCRIPTIF;
}
#rub#ID_RUBRIQUE #portfolio dd + dt {
  border-top-color:#DESCRIPTIF;
}
</BOUCLE_couleur2>
<BOUCLE_contraste(DOCUMENTS){id_rubrique}{0,1}{titre==contraste}>
#rub#ID_RUBRIQUE p.surtitre, #rub#ID_RUBRIQUE p.soustitre, #rub#ID_RUBRIQUE div.spip_doc_titre, #rub#ID_RUBRIQUE div.spip_doc_descriptif {
  color:#DESCRIPTIF;
}
</BOUCLE_contraste>
<BOUCLE_secteur(RUBRIQUES){id_secteur}{par id_rubrique}{doublons}>/*--- sous-rubrique #TITRE ---*/<BOUCLE_couleur3(DOCUMENTS){id_rubrique}{0,1}{descriptif==^#}>
#localisationRub1#ID_RUBRIQUE, #rub#ID_RUBRIQUE table.spip th, #rub#ID_RUBRIQUE #FormulairePetitionsSignatures, #rub#ID_RUBRIQUE #FormulairePetitions, #rub#ID_RUBRIQUE div.spip_encadrer, #rub#ID_RUBRIQUE #contenu-rubrique-breves h2, img.puce_transparente, #rub#ID_RUBRIQUE img.spip_puce, #rub#ID_RUBRIQUE div.annuaire, #rub#ID_RUBRIQUE dl.alr-asso-activites, #rub#ID_RUBRIQUE table.spip th, #rub#ID_RUBRIQUE h3#titreFP, #rub#ID_RUBRIQUE h3#titreDocuments, #rub#ID_RUBRIQUE #titreMotCles, #rub#ID_RUBRIQUE #titrePortfolio,  #rub#ID_RUBRIQUE #pf {
    background-color:#DESCRIPTIF;
}
#rub#ID_RUBRIQUE #colonne_principale a, #rub#ID_RUBRIQUE #cp_interieure h2, #rub#ID_RUBRIQUE .notes h3, #rub#ID_RUBRIQUE h3.spip, #themes #colonne_principale span.rubrique_courante#ID_RUBRIQUE a {
  color:#DESCRIPTIF;
}
</BOUCLE_couleur3></BOUCLE_secteur>
</BOUCLE_racine>
      ';
      # on a mis tout dans $somecontent
      # maintenant, on va mettre $somecontent dans un fichier css
      $filename = 'css/couleurs.css';
      // Assurons nous que le fichier est accessible en écriture
      if (is_writable($filename)) {
        // Dans notre exemple, nous ouvrons le fichier $filename en mode d'ajout
        // Le pointeur de fichier est placé à la fin du fichier
        // c'est là que $somecontent sera placé
        if (!$handle = fopen($filename, 'w')) {
              echo "Impossible d'ouvrir le fichier ($filename)";
              exit;
        }
        // Ecrivons quelque chose dans notre fichier.
        if (fwrite($handle, $somecontent) === FALSE) {
            echo "Impossible d'&eacute;crire dans le fichier ($filename)";
            exit;
        }
        echo "L'&eacute;criture de ($somecontent) dans le fichier ($filename) a r&eacute;ussi";
        fclose($handle);
      } else {
        echo "Le fichier $filename n'est pas accessible en &eacute;criture.";
      }
      ?>