/// PROSE
/// https://github.com/GoogleChrome/web.dev/blob/main/src/scss/blocks/_prose.scss

@use "../utilities/wrapper-content";
@use "../utilities/flow";
@use "../settings";
@use "sass:math";

.prose {
  --flow-space: var(--space-m);

  @extend .flow;
  @extend .wrapper-content;
  max-width: #{math.div(settings.$FRAAP-PROSE-MAX-WIDTH, 16) * 1rem};

  // Variant offset-icon (rubrique et certains articles).
  &.with-offset-icon {
    padding-left: 0;
  }

  // Règles de marges (flow)
  figure,
  figure + *,
  aside,
  aside + *,
  h2 {
    --flow-space: var(--space-xl);
  }

  h3,
  h4,
  h5,
  h6 {
    --flow-space: var(--space-l);
  }

  h2 + *,
  h3 + *,
  h4 + *,
  h5 + * {
    --flow-space: var(--space-s);
  }

  h2 + h3,
  h3 + h4,
  h5 + h6 {
    --flow-space: var(--space-l);
  }

  ul.spip,
  ol.spip {
    --flow-space: var(--space-xs);
    > li + li {
      margin-top: var(--flow-space);
    }
  }

  // Liens
  // Etendre la couleur à tous liens avec ou sans classe (@voir _links.scss)
  a {
    color: var(--color-link);
  }

  // Etendue des lignes/blocs
  h2,
  h3,
  h4,
  h5,
  h6 {
    max-width: 50ch;
  }

  p,
  li,
  hr {
    max-width: 70ch;
  }

  > img,
  > table {
    width: 100%;
  }

  // Ancre des les intertitres
  h2,
  h3,
  h4,
  h5,
  h6 {
    a[href^="#"] {
      color: transparent;
      font-weight: 600;
      text-decoration: none;
      transition: color 0.3s;
    }

    &:hover a[href^="#"],
    a[href^="#"]:focus {
      color: var(--color-link);
    }
  }


  /// Details gets more surrounding space, but the inner elements
  /// should all be equal
  // details,
  // details + * {
  //   --flow-space: var(--space-xl);
  // }

  // details + details {
  //   margin-top: 0;
  // }

  // details > * {
  //   --flow-space: var(--space-m);
  // }

}
