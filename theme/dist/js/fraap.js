var Fraap=function(t){"use strict";let e="",o=[];function i(t,e){return{from:t.closest(".site-nav_list"),to:e.querySelector(new URL(t.href).hash)}}function n(t,e,i){let n=2===e.compareDocumentPosition(i),r=t.closest("div.site-nav_body");i.setAttribute("aria-hidden","false"),e.scrollIntoView({inline:"start"}),r.addEventListener("scroll",s,{passive:!0});let a=n?0:i.offsetLeft;r.scrollTo({left:a,behavior:"smooth"}),o.push((()=>{e.setAttribute("aria-hidden","true"),i.querySelector("[href]").focus()}))}function s(t){clearTimeout(e),e=setTimeout((()=>{t.target.removeEventListener("scroll",s,{passive:!0}),o.map((t=>{t()})),o=[]}),50)}function r(t){t.querySelectorAll("ul.site-nav_list").forEach(((t,e)=>{t.setAttribute("aria-hidden",String(0!==e))})),t.scrollLeft=0,o=[]}var a=['a[href]:not([tabindex^="-"])','area[href]:not([tabindex^="-"])','input:not([type="hidden"]):not([type="radio"]):not([disabled]):not([tabindex^="-"])','input[type="radio"]:not([disabled]):not([tabindex^="-"])','select:not([disabled]):not([tabindex^="-"])','textarea:not([disabled]):not([tabindex^="-"])','button:not([disabled]):not([tabindex^="-"])','iframe:not([tabindex^="-"])','audio[controls]:not([tabindex^="-"])','video[controls]:not([tabindex^="-"])','[contenteditable]:not([tabindex^="-"])','[tabindex]:not([tabindex^="-"])'];function d(t){this._show=this.show.bind(this),this._hide=this.hide.bind(this),this._maintainFocus=this._maintainFocus.bind(this),this._bindKeypress=this._bindKeypress.bind(this),this.$el=t,this.shown=!1,this._id=this.$el.getAttribute("data-a11y-dialog")||this.$el.id,this._previouslyFocused=null,this._listeners={},this.create()}function l(t,e){return o=(e||document).querySelectorAll(t),Array.prototype.slice.call(o);var o}function u(t){(t.querySelector("[autofocus]")||t).focus()}function c(){l("[data-a11y-dialog]").forEach((function(t){new d(t)}))}d.prototype.create=function(){this.$el.setAttribute("aria-hidden",!0),this.$el.setAttribute("aria-modal",!0),this.$el.setAttribute("tabindex",-1),this.$el.hasAttribute("role")||this.$el.setAttribute("role","dialog"),this._openers=l('[data-a11y-dialog-show="'+this._id+'"]'),this._openers.forEach(function(t){t.addEventListener("click",this._show)}.bind(this));const t=this.$el;return this._closers=l("[data-a11y-dialog-hide]",this.$el).filter((function(e){return e.closest('[aria-modal="true"], [data-a11y-dialog]')===t})).concat(l('[data-a11y-dialog-hide="'+this._id+'"]')),this._closers.forEach(function(t){t.addEventListener("click",this._hide)}.bind(this)),this._fire("create"),this},d.prototype.show=function(t){return this.shown||(this._previouslyFocused=document.activeElement,this.$el.removeAttribute("aria-hidden"),this.shown=!0,u(this.$el),document.body.addEventListener("focus",this._maintainFocus,!0),document.addEventListener("keydown",this._bindKeypress),this._fire("show",t)),this},d.prototype.hide=function(t){return this.shown?(this.shown=!1,this.$el.setAttribute("aria-hidden","true"),this._previouslyFocused&&this._previouslyFocused.focus&&this._previouslyFocused.focus(),document.body.removeEventListener("focus",this._maintainFocus,!0),document.removeEventListener("keydown",this._bindKeypress),this._fire("hide",t),this):this},d.prototype.destroy=function(){return this.hide(),this._openers.forEach(function(t){t.removeEventListener("click",this._show)}.bind(this)),this._closers.forEach(function(t){t.removeEventListener("click",this._hide)}.bind(this)),this._fire("destroy"),this._listeners={},this},d.prototype.on=function(t,e){return void 0===this._listeners[t]&&(this._listeners[t]=[]),this._listeners[t].push(e),this},d.prototype.off=function(t,e){var o=(this._listeners[t]||[]).indexOf(e);return o>-1&&this._listeners[t].splice(o,1),this},d.prototype._fire=function(t,e){var o=this._listeners[t]||[],i=new CustomEvent(t,{detail:e});this.$el.dispatchEvent(i),o.forEach(function(t){t(this.$el,e)}.bind(this))},d.prototype._bindKeypress=function(t){const e=document.activeElement;e&&e.closest('[aria-modal="true"]')!==this.$el||(this.shown&&"Escape"===t.key&&"alertdialog"!==this.$el.getAttribute("role")&&(t.preventDefault(),this.hide(t)),this.shown&&"Tab"===t.key&&function(t,e){var o=function(t){return l(a.join(","),t).filter((function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)}))}(t),i=o.indexOf(document.activeElement);e.shiftKey&&0===i?(o[o.length-1].focus(),e.preventDefault()):e.shiftKey||i!==o.length-1||(o[0].focus(),e.preventDefault())}(this.$el,t))},d.prototype._maintainFocus=function(t){!this.shown||t.target.closest('[aria-modal="true"]')||t.target.closest("[data-a11y-dialog-ignore-focus-trap]")||u(this.$el)},"undefined"!=typeof document&&("loading"===document.readyState?document.addEventListener("DOMContentLoaded",c):window.requestAnimationFrame?window.requestAnimationFrame(c):window.setTimeout(c,16));var h=!1;if("undefined"!=typeof window){var f={get passive(){h=!0}};window.addEventListener("testPassive",null,f),window.removeEventListener("testPassive",null,f)}var v="undefined"!=typeof window&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||"MacIntel"===window.navigator.platform&&window.navigator.maxTouchPoints>1),m=[],p=!1,y=-1,b=void 0,g=void 0,w=void 0,_=function(t){return m.some((function(e){return!(!e.options.allowTouchMove||!e.options.allowTouchMove(t))}))},E=function(t){var e=t||window.event;return!!_(e.target)||(e.touches.length>1||(e.preventDefault&&e.preventDefault(),!1))},S=function(t,e){if(t){if(!m.some((function(e){return e.targetElement===t}))){var o={targetElement:t,options:e||{}};m=[].concat(function(t){if(Array.isArray(t)){for(var e=0,o=Array(t.length);e<t.length;e++)o[e]=t[e];return o}return Array.from(t)}(m),[o]),v?window.requestAnimationFrame((function(){if(void 0===g){g={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left};var t=window,e=t.scrollY,o=t.scrollX,i=t.innerHeight;document.body.style.position="fixed",document.body.style.top=-e,document.body.style.left=-o,setTimeout((function(){return window.requestAnimationFrame((function(){var t=i-window.innerHeight;t&&e>=i&&(document.body.style.top=-(e+t))}))}),300)}})):function(t){if(void 0===w){var e=!!t&&!0===t.reserveScrollBarGap,o=window.innerWidth-document.documentElement.clientWidth;if(e&&o>0){var i=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right"),10);w=document.body.style.paddingRight,document.body.style.paddingRight=i+o+"px"}}void 0===b&&(b=document.body.style.overflow,document.body.style.overflow="hidden")}(e),v&&(t.ontouchstart=function(t){1===t.targetTouches.length&&(y=t.targetTouches[0].clientY)},t.ontouchmove=function(e){1===e.targetTouches.length&&function(t,e){var o=t.targetTouches[0].clientY-y;!_(t.target)&&(e&&0===e.scrollTop&&o>0||function(t){return!!t&&t.scrollHeight-t.scrollTop<=t.clientHeight}(e)&&o<0?E(t):t.stopPropagation())}(e,t)},p||(document.addEventListener("touchmove",E,h?{passive:!1}:void 0),p=!0))}}else console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.")},A=function(t){t?(m=m.filter((function(e){return e.targetElement!==t})),v&&(t.ontouchstart=null,t.ontouchmove=null,p&&0===m.length&&(document.removeEventListener("touchmove",E,h?{passive:!1}:void 0),p=!1)),v?function(){if(void 0!==g){var t=-parseInt(document.body.style.top,10),e=-parseInt(document.body.style.left,10);document.body.style.position=g.position,document.body.style.top=g.top,document.body.style.left=g.left,window.scrollTo(e,t),g=void 0}}():(void 0!==w&&(document.body.style.paddingRight=w,w=void 0),void 0!==b&&(document.body.style.overflow=b,b=void 0))):console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.")};function L(t,e){const o=this;this._handleEvent=this._handleEvent.bind(this),this.el=t,this.options=e||{},this.document=this.el.querySelector('[role="document"]'),this.state=new Proxy({status:"open"},{set(t,e,i){const n=t[e];return t[e]=i,n!==i&&o._processState(),t}}),this.create()}L.prototype.create=function(){this.dialog=new d(this.el),this._toggleState(this.state),this.dialog.on("show",((t,e)=>{this._toggleState(this.state,"open"),S(this.el,this.options);let o=e.currentTarget.getAttribute("data-menu-controls");o&&"menu-0"!==o&&"menu-0"!==o&&function(t,e,o){let s=t.querySelector("a[data-menu-controls="+o+"]"),r=i(s,e);n(s,r.from,r.to)}(this.document,this.el,o)})),this.dialog.on("hide",((t,e)=>{this._toggleState(this.state,"closing"),this.document.addEventListener("transitionend",this._handleEvent)}))},L.prototype._processState=function(){this.el.setAttribute("data-dialog-status",this.state.status)},L.prototype._toggleState=function(t,e){if(e){if(t.status===e)return;t.status=e}else t.status="closed"===t.status?"open":"closed"},L.prototype._handleEvent=function(t){this._toggleState(this.state,"closed"),this.document.removeEventListener("transitionend",this._handleEvent),A(t.target,this.options),r(this.document)};const x={init:function(){let t,e,o=document.querySelector("#navShortcuts"),s=document.querySelector("#siteNavOffcanvas");s.querySelector('[role="document"]'),o&&s&&(t=o.querySelectorAll('li[data-type-link="shortcut"]'),e=s.querySelectorAll('li[data-type-link="shortcut"] > [href][data-menu-controls]'),e.forEach((t=>{let e=i(t,s);t.addEventListener("click",(o=>{o.preventDefault(),n(t,e.from,e.to)}))})),r(s),t.forEach((t=>{let e=t.getElementsByTagName("a")[0];!function(t,e){let o=e.innerHTML,i=e.attributes,n=document.createElement("button");if(null!==e){n.innerHTML=o.trim();for(let t=0;t<i.length;t++){const e=i[t];"href"!==e.name&&(n.setAttribute(e.name,e.value),n.setAttribute("type","button"),n.setAttribute("data-a11y-dialog-show","siteNavOffcanvas"))}t.replaceChild(n,e)}}(t,e)})))}};return[["dialogRecherche",{}],["siteNavOffcanvas",{allowTouchMove:()=>!0}]].forEach((t=>{let e=t[0],o=t[1],i=document.querySelector("#"+e);i&&("siteNavOffcanvas"==e&&x.init(),new L(i,o))})),t.FraapDialog=L,Object.defineProperty(t,"__esModule",{value:!0}),t}({});
