var FraapMembers=function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var o=t(e);function r(e){this.map=e,this.container=e._container.parentElement.parentElement,this.list=this.container.querySelector("[role='list']"),this.bar=this.container.previousElementSibling,this.flyToMember.bind(this),this.create()}return r.prototype.create=function(){let e=this,t=function(){e.onclickMarker(),e.sleep.disableMap(),o.default("#"+e.map._container.id).off("ready",t)};var r,a,i;return e.sleep=L.control.toggleSleepMap({}).addTo(this.map),o.default("#"+e.map._container.id).on("ready",t),e.openers=(r=".card-member",a=this.container,i=(a||document).querySelectorAll(r),Array.prototype.slice.call(i)),e.openers.forEach((t=>{t.querySelector("button").addEventListener("click",e.flyToMember.bind(e))})),this},r.prototype.flyToMember=function(e){let t=[],o=e.target.dataset.fraapmemberId;t.push(parseFloat(e.target.dataset.fraapmemberLat)),t.push(parseFloat(e.target.dataset.fraapmemberLon)),this._scrollUI(),this.map.flyTo(t,15),this.openMemberPopup(o),this._toggleMember(o)},r.prototype.onclickMarker=function(){let e=this;this.map.eachLayer((function(t){t.on("click",(function(t){this.feature&&(e._scrollUI(),e._toggleMember(this.feature.id))}))}))},r.prototype._scrollUI=function(){0==this.bar.offsetTop?this.bar.scrollIntoView({behavior:"smooth"}):this.bar.offsetTop>0&&window.scrollTo({top:this.container.offsetParent.offsetTop,left:0,behavior:"smooth"})},r.prototype._toggleMember=function(e){let t=this.container.querySelector("#member-"+e);this.openers.forEach((e=>{e.classList.contains("is-active")&&e.classList.remove("is-active")})),t.classList.add("is-active"),this.list.scrollTo({top:t.offsetTop-1,left:0,behavior:"smooth"})},r.prototype.openMemberPopup=function(e){let t,o=this.map;for(t in o._layers)if(o._layers[t].feature&&o._layers[t].feature.id==e||o._layers[t].id&&ma._layers[t].id==e){o.centerAndZoom(o._layers[t].getLatLng(),!1),o._layers[t].openPopup();break}},r}($);
